## Virtual DOM: как работает, стадии рендеринга

### Virtual DOM

- **Описание**: Лёгкая копия реального DOM в памяти, используемая React для оптимизации обновлений.
- **Для чего нужен**: Ускоряет манипуляции с UI, минимизируя прямые изменения в DOM.

### Как работает:

1. **Рендер**:
   - Компонент возвращает JSX, преобразуемый в объекты виртуального DOM.
2. **Реконсиляция** (Diffing):
   - React сравнивает новое виртуальное дерево со старым.
   - Определяет минимальные изменения (добавление, удаление, обновление).
3. **Обновление**:
   - Применяет изменения к реальному DOM.

### Стадии рендеринга:

1. **Render Phase**:
   - Вызов функций компонентов или методов `render`.
   - Создание виртуального DOM.
   - **Commit Phase**:
   - Применение изменений к реальному DOM.
   - Вызов `componentDidMount`, `useEffect`.

**Пример**:

```jsx
function App() {
  const [count, setCount] = useState(0);
  return <div onClick={() => setCount(count + 1)}>{count}</div>;
}
```

При клике React пересчитывает виртуальный DOM, сравнивает и обновляет только текст.

**Ресурсы**:

- [React: Reconciliation](https://react.dev/learn/preserving-and-resetting-state)
- [Хабр: Virtual DOM](https://habr.com/ru/post/256965/)
