# Протоколы HTTP/1.1, HTTP/2 и HTTPS

Описание основных характеристик, преимуществ и отличий HTTP/1.1, HTTP/2 и HTTPS.

---

## HTTP/1.1

Текстовый протокол передачи гипертекста (RFC 7230–7235), широко используемый с конца 1990-х.

### Основные возможности и преимущества

- **Простота**: читаемый текстовый формат, легко отлаживать через telnet/Netcat
- **Широкая поддержка**: работает на большинстве серверов, прокси и CDN
- **Постоянные соединения (Keep‑Alive)**: позволяет отправлять несколько запросов по одному TCP‑соединению
- **Кэширование**: гибкая система заголовков (`Cache‑Control`, `ETag`, `Expires`)

---

## HTTP/2

Бинарный протокол (RFC 7540), вышел в 2015 г. для ускорения загрузки страниц.

### Основные преимущества над HTTP/1.1

- **Мультиплексирование**: несколько запросов и ответов идут по одному TCP‑соединению параллельно, без очередей
- **Сжатие заголовков (HPACK)**: уменьшает объём повторяющихся HTTP‑заголовков
- **Server Push**: сервер может заранее отправить ресурсы (CSS, JS), не дожидаясь запросов
- **Приоритеты потоков**: браузер может указать, какие ресурсы важнее
- **Бинарный формат**: надёжнее парсится и менее подвержен багам разбора текста

---

## HTTPS

HTTP поверх TLS (SSL) — шифрованный вариант HTTP/1.1 или HTTP/2.

### Преимущества HTTPS

- **Конфиденциальность**: шифрует весь трафик между клиентом и сервером
- **Целостность**: защита от подмены содержимого в пути
- **Аутентификация**: проверка подлинности сервера через сертификат
- **SEO‑бонус**: поисковые системы (Google) предпочитают HTTPS‑сайты
- **HTTP/2 только по HTTPS**: большинство браузеров включают HTTP/2 только для защищённых соединений

# Технические ограничения на размер тела HTTP-запроса

HTTP‑спецификация **не устанавливает жёсткого лимита** на размер тела запроса. Практический максимум определяется **минимумом** между ограничениями **клиента (браузера)** и **сервера** :contentReference[oaicite:0]{index=0}.

---

## Браузеры (клиент)

- **Internet Explorer** (все версии): до 2 ГБ−1
- **Firefox**: до 2 ГБ−1
- **Chrome / Opera**: до 4 ГБ
- **Safari**: ~2 ГБ
  > Эти значения основаны на опыте разработчиков и возможностях движка, но на практике вызывает сложности уже при сотнях мегабайт :contentReference[oaicite:1]{index=1}.

---

## Веб‑серверы (сервер)

| Сервер           | Значение по умолчанию         | Примечание                                                                             |
| ---------------- | ----------------------------- | -------------------------------------------------------------------------------------- |
| **Nginx**        | 1 MiB                         | директива `client_max_body_size 1m;` :contentReference[oaicite:2]{index=2}             |
| **Apache HTTPD** | ≈2 GiB (не документировано)   | практический максимум при стандартных настройках :contentReference[oaicite:3]{index=3} |
| **IIS**          | ≈28.6 MiB (default)           | можно изменить через `<requestLimits>` :contentReference[oaicite:4]{index=4}           |
| **Tomcat**       | 2 MiB (`maxPostSize=2097152`) | в `<Connector>` в server.xml :contentReference[oaicite:5]{index=5}                     |

---

## Прокси и фреймворки

- **Прокси (например, NGINX)** также могут накладывать свои ограничения (см. `client_max_body_size`).
- **Express.js** (body-parser): по умолчанию `limit: '100kb'` для JSON и URL‑encoded :contentReference[oaicite:6]{index=6}.
- **Другие фреймворки** часто имеют аналогичные дефолтные лимиты и опции для настройки.

---

## Как проверить и изменить

### Nginx

```nginx
http {
  client_max_body_size 50M;
}
```

## Полезные ссылки

**MDN Web Docs**  
 – [Overview of HTTP/1.1](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#http1_1)  
 – [HTTP/2](https://developer.mozilla.org/en-US/docs/Web/HTTP/Overview#http2)  
 – [Introduction to HTTPS](https://developer.mozilla.org/en-US/docs/Glossary/HTTPS)

**web.dev**  
 – [HTTP/2 Basics](https://web.dev/http2/)  
 – [Why HTTPS Matters](https://web.dev/why-https-matters/)

**Google Developers**  
 – [HTTP/2: A Complete Guide](https://developers.google.com/web/fundamentals/performance/http2)

**Ilya Grigorik**  
 – [High Performance Browser Networking, Chap. 12: HTTP/2](https://hpbn.co/http2/)
